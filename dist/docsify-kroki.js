/*!
 * docsify-kroki
 * v1.2.1
 * https://github.com/zuisong/docsify-kroki
 * (c) 2020-2023 zuisong
 * MIT license
 */
var r=Uint8Array,n=Uint16Array,e=Int32Array,t=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(r,t){for(var a=new n(31),o=0;o<31;++o)a[o]=t+=1<<r[o-1];var f=new e(a[30]);for(o=1;o<30;++o)for(var i=a[o];i<a[o+1];++i)f[i]=i-a[o]<<5|o;return{b:a,r:f}},i=f(t,2),c=i.b,l=i.r;c[28]=258,l[258]=28;var u=f(a,0).r,s=new n(32768);for(w=0;w<32768;++w)v=(61680&(v=(52428&(v=(43690&w)>>1|(21845&w)<<1))>>2|(13107&v)<<2))>>4|(3855&v)<<4,s[w]=((65280&v)>>8|(255&v)<<8)>>1;var v,h=function(r,e,t){for(var a=r.length,o=0,f=new n(e);o<a;++o)r[o]&&++f[r[o]-1];var i,c=new n(e);for(o=1;o<e;++o)c[o]=c[o-1]+f[o-1]<<1;if(t){i=new n(1<<e);var l=15-e;for(o=0;o<a;++o)if(r[o])for(var u=o<<4|r[o],v=e-r[o],h=c[r[o]-1]++<<v,d=h|(1<<v)-1;h<=d;++h)i[s[h]>>l]=u}else for(i=new n(a),o=0;o<a;++o)r[o]&&(i[o]=s[c[r[o]-1]++]>>15-r[o]);return i},d=new r(288);for(w=0;w<144;++w)d[w]=8;for(w=144;w<256;++w)d[w]=9;for(w=256;w<280;++w)d[w]=7;for(w=280;w<288;++w)d[w]=8;var g=new r(32);for(w=0;w<32;++w)g[w]=5;var w,m=h(d,9,0);h(d,9,1);var y=h(g,5,0);h(g,5,1);var p=function(r){return(r+7)/8|0},b=function(r,n,e){e<<=7&n;var t=n/8|0;r[t]|=e,r[t+1]|=e>>8},M=function(r,n,e){e<<=7&n;var t=n/8|0;r[t]|=e,r[t+1]|=e>>8,r[t+2]|=e>>16},x=function(e,t){for(var a=[],o=0;o<e.length;++o)e[o]&&a.push({s:o,f:e[o]});var f=a.length,i=a.slice();if(!f)return{t:C,l:0};if(1==f){var c=new r(a[0].s+1);return c[a[0].s]=1,{t:c,l:1}}a.sort((function(r,n){return r.f-n.f})),a.push({s:-1,f:25001});var l=a[0],u=a[1],s=0,v=1,h=2;for(a[0]={s:-1,f:l.f+u.f,l:l,r:u};v!=f-1;)l=a[a[s].f<a[h].f?s++:h++],u=a[s!=v&&a[s].f<a[h].f?s++:h++],a[v++]={s:-1,f:l.f+u.f,l:l,r:u};var d=i[0].s;for(o=1;o<f;++o)i[o].s>d&&(d=i[o].s);var g=new n(d+1),w=k(a[v-1],g,0);if(w>t){o=0;var m=0,y=w-t,p=1<<y;for(i.sort((function(r,n){return g[n.s]-g[r.s]||r.f-n.f}));o<f;++o){var b=i[o].s;if(!(g[b]>t))break;m+=p-(1<<w-g[b]),g[b]=t}for(m>>=y;m>0;){var M=i[o].s;g[M]<t?m-=1<<t-g[M]++-1:++o}for(;o>=0&&m;--o){var x=i[o].s;g[x]==t&&(--g[x],++m)}w=t}return{t:new r(g),l:w}},k=function(r,n,e){return-1==r.s?Math.max(k(r.l,n,e+1),k(r.r,n,e+1)):n[r.s]=e},$=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new n(++e),a=0,o=r[0],f=1,i=function(r){t[a++]=r},c=1;c<=e;++c)if(r[c]==o&&c!=e)++f;else{if(!o&&f>2){for(;f>138;f-=138)i(32754);f>2&&(i(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(i(o),--f;f>6;f-=6)i(8304);f>2&&(i(f-3<<5|8208),f=0)}for(;f--;)i(o);f=1,o=r[c]}return{c:t.subarray(0,a),n:e}},T=function(r,n){for(var e=0,t=0;t<n.length;++t)e+=r[t]*n[t];return e},A=function(r,n,e){var t=e.length,a=p(n+2);r[a]=255&t,r[a+1]=t>>8,r[a+2]=255^r[a],r[a+3]=255^r[a+1];for(var o=0;o<t;++o)r[a+o+4]=e[o];return 8*(a+4+t)},E=function(r,e,f,i,c,l,u,s,v,w,p){b(e,p++,f),++c[256];for(var k=x(c,15),E=k.t,z=k.l,C=x(l,15),j=C.t,H=C.l,I=$(E),L=I.c,P=I.n,S=$(j),q=S.c,U=S.n,D=new n(19),N=0;N<L.length;++N)++D[31&L[N]];for(N=0;N<q.length;++N)++D[31&q[N]];for(var O=x(D,7),R=O.t,_=O.l,B=19;B>4&&!R[o[B-1]];--B);var F,G,J,K,Q=w+5<<3,V=T(c,d)+T(l,g)+u,W=T(c,E)+T(l,j)+u+14+3*B+T(D,R)+2*D[16]+3*D[17]+7*D[18];if(v>=0&&Q<=V&&Q<=W)return A(e,p,r.subarray(v,v+w));if(b(e,p,1+(W<V)),p+=2,W<V){F=h(E,z,0),G=E,J=h(j,H,0),K=j;var X=h(R,_,0);b(e,p,P-257),b(e,p+5,U-1),b(e,p+10,B-4),p+=14;for(N=0;N<B;++N)b(e,p+3*N,R[o[N]]);p+=3*B;for(var Y=[L,q],Z=0;Z<2;++Z){var rr=Y[Z];for(N=0;N<rr.length;++N){var nr=31&rr[N];b(e,p,X[nr]),p+=R[nr],nr>15&&(b(e,p,rr[N]>>5&127),p+=rr[N]>>12)}}}else F=m,G=d,J=y,K=g;for(N=0;N<s;++N){var er=i[N];if(er>255){M(e,p,F[(nr=er>>18&31)+257]),p+=G[nr+257],nr>7&&(b(e,p,er>>23&31),p+=t[nr]);var tr=31&er;M(e,p,J[tr]),p+=K[tr],tr>3&&(M(e,p,er>>5&8191),p+=a[tr])}else M(e,p,F[er]),p+=G[er]}return M(e,p,F[256]),p+G[256]},z=new e([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),C=new r(0),j=function(o,f,i,c,s,v){var h=v.z||o.length,d=new r(c+h+5*(1+Math.ceil(h/7e3))+s),g=d.subarray(c,d.length-s),w=v.l,m=7&(v.r||0);if(f){m&&(g[0]=v.r>>3);for(var y=z[f-1],b=y>>13,M=8191&y,x=(1<<i)-1,k=v.p||new n(32768),$=v.h||new n(x+1),T=Math.ceil(i/3),C=2*T,j=function(r){return(o[r]^o[r+1]<<T^o[r+2]<<C)&x},H=new e(25e3),I=new n(288),L=new n(32),P=0,S=0,q=v.i||0,U=0,D=v.w||0,N=0;q+2<h;++q){var O=j(q),R=32767&q,_=$[O];if(k[R]=_,$[O]=R,D<=q){var B=h-q;if((P>7e3||U>24576)&&(B>423||!w)){m=E(o,g,0,H,I,L,S,U,N,q-N,m),U=P=S=0,N=q;for(var F=0;F<286;++F)I[F]=0;for(F=0;F<30;++F)L[F]=0}var G=2,J=0,K=M,Q=R-_&32767;if(B>2&&O==j(q-Q))for(var V=Math.min(b,B)-1,W=Math.min(32767,q),X=Math.min(258,B);Q<=W&&--K&&R!=_;){if(o[q+G]==o[q+G-Q]){for(var Y=0;Y<X&&o[q+Y]==o[q+Y-Q];++Y);if(Y>G){if(G=Y,J=Q,Y>V)break;var Z=Math.min(Q,Y-2),rr=0;for(F=0;F<Z;++F){var nr=q-Q+F&32767,er=nr-k[nr]&32767;er>rr&&(rr=er,_=nr)}}}Q+=(R=_)-(_=k[R])&32767}if(J){H[U++]=268435456|l[G]<<18|u[J];var tr=31&l[G],ar=31&u[J];S+=t[tr]+a[ar],++I[257+tr],++L[ar],D=q+G,++P}else H[U++]=o[q],++I[o[q]]}}for(q=Math.max(q,D);q<h;++q)H[U++]=o[q],++I[o[q]];m=E(o,g,w,H,I,L,S,U,N,q-N,m),w||(v.r=7&m|g[m/8|0]<<3,m-=7,v.h=$,v.p=k,v.i=q,v.w=D)}else{for(q=v.w||0;q<h+w;q+=65535){var or=q+65535;or>=h&&(g[m/8|0]=w,or=h),m=A(g,m+1,o.subarray(q,or))}v.i=h}return function(n,e,t){(null==e||e<0)&&(e=0),(null==t||t>n.length)&&(t=n.length);var a=new r(t-e);return a.set(n.subarray(e,t)),a}(d,0,c+p(m)+s)};!function(){for(var r=new Int32Array(256),n=0;n<256;++n){for(var e=n,t=9;--t;)e=(1&e&&-306674912)^e>>>1;r[n]=e}}();var H=function(){var r=1,n=0;return{p:function(e){for(var t=r,a=n,o=0|e.length,f=0;f!=o;){for(var i=Math.min(f+2655,o);f<i;++f)a+=t+=e[f];t=(65535&t)+15*(t>>16),a=(65535&a)+15*(a>>16)}r=t,n=a},d:function(){return(255&(r%=65521))<<24|(65280&r)<<8|(255&(n%=65521))<<8|n>>8}}},I=function(n,e,t,a,o){if(!o&&(o={l:1},e.dictionary)){var f=e.dictionary.subarray(-32768),i=new r(f.length+n.length);i.set(f),i.set(n,f.length),n=i,o.w=f.length}return j(n,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+e.mem,t,a,o)},L=function(r,n,e){for(;e;++n)r[n]=e,e>>>=8},P=function(r,n){var e=n.level,t=0==e?0:e<6?1:9==e?3:2;if(r[0]=120,r[1]=t<<6|(n.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,n.dictionary){var a=H();a.p(n.dictionary),L(r,2,a.d())}};typeof TextEncoder<"u"&&new TextEncoder;var S=typeof TextDecoder<"u"&&new TextDecoder;try{S.decode(C,{stream:!0}),1}catch{}async function q(r){return await function(r,n){n||(n={});var e=H();e.p(r);var t=I(r,n,n.dictionary?6:2,4);return P(t,n),L(t,t.length-4,e.d()),t}(r,{level:9})}async function U(r){const n=function(r){return(new TextEncoder).encode(r)}(r),e=q(n);return function(r){const n=[];for(let e=0;e<r.length;e+=16384)n.push(String.fromCharCode(...r.subarray(e,e+16384)));return n.join("")}(await e)}const D=r=>btoa(encodeURI(r)),N="image/svg+xml";async function O(r,n,e){const t=`${e+n}/svg/`,a=await U(r),o=`<object type="image/svg+xml" data="${t+btoa(a).replace(/\+/g,"-").replace(/\//g,"_")}" />`;return o.length<4e3?o:async function(r,n,e){const t=`${e+n}/svg/`,a=await fetch(t,{method:"POST",body:r}),o=await a.text();return`\n    <object data="data:${N};base64,${D(o)}"\n    type="${N}"></object>\n    `}(r,n,e)}function R(r,n){const e=document.createElement(r);return e.innerHTML=n,e}const _={langs:["actdiag","blockdiag","bpmn","bytefield","c4plantuml","d2","dbml","ditaa","erd","excalidraw","graphviz","mermaid","nomnoml","nwdiag","packetdiag","pikchr","plantuml","rackdiag","seqdiag","structurizr","svgbob","symbolator","tikz","vega","vegalite","wavedrom","wireviz"],serverPath:"//kroki.io/"};window.$docsify=window.$docsify||{},window.$docsify.plugins=(window.$docsify.plugins||[]).concat(((r,n)=>{r.afterEach(((r,e)=>{var t;(async function(r,n){const e=R("span",r),t=[];for(const r of n.langs){const a=Array.from(e.querySelectorAll(`pre[data-lang="${r}"]`));for(const e of a)if(e instanceof HTMLElement){const a=O(e.textContent,r,n.serverPath).then((n=>{var t;const a=R("p",n);a.dataset.lang=r,null==(t=e.parentNode)||t.replaceChild(a,e)}));t.push(a)}const o=Array.from(e.querySelectorAll(`img[alt="kroki-${r}"]`));for(const e of o)if(e instanceof HTMLImageElement){const a=e,o=e.parentNode,f=a.getAttribute("src");if(!f)continue;const i=fetch(f).then((r=>r.text())).then((e=>O(e,r,n.serverPath))).then((n=>{const t=R("p",n);o&&(t.dataset.lang=r,o.replaceChild(t,e))}));t.push(i)}}for(const r of t)await r.catch((r=>console.error(r)));return e.innerHTML})(r,{..._,...(null==(t=null==n?void 0:n.config)?void 0:t.kroki)||{}}).then(e)}))}));
//# sourceMappingURL=https://unpkg.com/docsify-kroki@1.2.1/dist/docsify-kroki.js.map
